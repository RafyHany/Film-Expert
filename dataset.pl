
%knowledge_base
%comedy
comedy("Ace Ventura: Pet Detective", "Tom Shadyac",["Jim Carrey", "Courteney Cox", "Sean Young", "Tone Loc", "Dan Marino"], 1994, 6.9).
comedy("The Grand Budapest Hotel", "Wes Anderson",["Ralph Fiennes", "Tony Revolori", "Saoirse Ronan", "Adrien Brody", "Willem Dafoe"],2014, 8.1).
comedy("Crazy Rich Asians", "Jon M. Chu",["Constance Wu", "Henry Golding", "Awkwafina", "Michelle Yeoh", "Gemma Chan"],2018, 6.9).
comedy("Caddyshack", "Harold Ramis",["Chevy Chase", "Rodney Dangerfield", "Bill Murray", "Ted Knight", "Michael O'Keefe"],1980, 7.3).
comedy("Ghostbusters", "Ivan Reitman",["Bill Murray", "Dan Aykroyd", "Sigourney Weaver","Harold Ramis", "Rick Moranis"],1984, 7.8).
comedy("Ferris Bueller's Day Off", "John Hughes",["Matthew Broderick", "Alan Ruck", "Mia Sara", "Jeffrey Jones","Jennifer Grey"] ,1986, 7.8).
comedy("Coming to America", "John Landis",["Eddie Murphy", "Arsenio Hall", "James Earl Jones", "John Amos", "Madge Sinclair"],1988, 7.0).
comedy("The Breakfast Club", "John Hughes",["Emilio Estevez", "Anthony Michael Hall", "Judd Nelson", "Molly Ringwald", "Ally Sheedy"],1985, 7.8).
 
%superheros
superheros("Thor: Love and Thunder","Taika Waititi",["Chris Hemsworth","Natalie Portman","Tessa Thompson","Christian Bale","Taika Waititi"],2022, 7.9).
superheros("Spider-Man: No Way Home","Jon Watts",["Tom Holland","Zendaya","Benedict Cumberbatch","Jacob Batalon","Willem Dafoe"],2021, 8.5).
superheros("Avengers: Endgame","Joe Russo",["Robert Downey Jr.","Chris Evans","Tom Holland","Chris Hemsworth","Mark Ruffalo"],2019, 8.4).
superheros("Guardians of the Galaxy","James Gunn",["Chris Pratt","Zoe Saldana","Dave Bautista","Vin Diesel","Bradley Cooper"],2014, 8.0).
superheros("Doctor Strange","Scott Derrickson",["Benedict Cumberbatch","Chiwetel Ejiofor","Rachel McAdams","Benedict Wong","Mads Mikkelsen"],2016, 7.5).
 
%cartoon
cartoon("Kung Fu Panda","Mark Osborne",["Jack Black","Dustin Hoffman","Angelina Jolie","Ian McShane","Jackie Chan"],2008, 7.6).
cartoon("The Incredibles","Brad Bird",["Craig T. Nelson","Holly Hunter","Samuel L. Jackson","Jason Lee","Sarah Vowell"],2004, 8.0).
cartoon("Megamind","Tom McGrath",["Will Ferrell","Tina Fey","Jonah Hill","David Cross","Brad Pitt"],2010, 7.2).
cartoon("Big Hero 6","Don Hall",["Ryan Potter","Scott Adsit","Jamie Chung","Damon Wayans Jr.","Genesis Rodriguez"],2014, 7.8).
cartoon("Wreck-It Ralph","Rich Moore",["John C. Reilly","Sarah Silverman","Jack McBrayer","Jane Lynch","Alan Tudyk"],2012, 7.7).
 
%science_fiction
science_fiction("Blade Runner 2049","Denis Villeneuve", ["Ryan Gosling", "Harrison Ford", "Ana de Armas", "Sylvia Hoeks", "Jared Leto"], 2017, 8.0).
science_fiction("Interstellar","Christopher Nolan",["Matthew McConaughey","Anne Hathaway"," Jessica Chastain", "Michael Caine", "Casey Affleck"] , 2014, 8.6).
science_fiction("Inception","Christopher Nolan",["Leonardo DiCaprio","Joseph Gordon-Levitt","Ellen Page","Tom Hardy", " Ken Watana"], 2010, 8.8).
science_fiction("Dune","Denis Villeneuve",["Timothée Chalamet","Rebecca Ferguson","Oscar Isaac", "Josh Brolin"], 2021, 8.3).
science_fiction("The Terminator","James Cameron", ["Arnold Schwarzenegger", "Michael Biehn", "Linda Hamilton", "Paul Winfield", "Lance Henriksen"], 1984, 8.0).
science_fiction("Avatar", "James Cameron",["Sam Worthington", "Zoe Saldana", "Sigourney Weaver", "Stephen Lang", "Michelle Rodriguez"], 2009, 7.8).
science_fiction("The Matrix","The Wachowskis", ["Keanu Reeves", "Laurence Fishburne", "Carrie-Anne Moss", "Hugo Weaving", "Joe Pantoliano"], 1999, 8.7).
 
%Action
action("John Wick","Chad Stahelski", [ "Keanu Reeves", "Ian McShane", "Willem Dafoe", "John Leguizamo","Lance Reddick"] ,2014, 7.4).
action("Mad Max: Fury Road","George Miller",[ "Tom Hardy","Charlize Theron","Nicholas Hoult","Hugh Keays,Byrne","Rosie Huntington","Whiteley"],2015, 8.1).
action("The Raid: Redemption","Gareth Evans",[ "Iko Uwais", "Yayan Ruhian", "Donny Alamsyah", "Joe Taslim", "Pierre Gruno"], 2011, 7.6).
action("Die Hard", "John McTiernan",["Bruce Willis", "Alan Rickman", "Bonnie Bedelia", "Reginald VelJohnson", "Alexander Godunov"], 1988, 8.2).
action("The Dark Knight","Christopher Nolan", ["Christian Bale", "Heath Ledger", "Aaron Eckhart", "Michael Caine", "Maggie Gyllenhaal"], 2008, 9.0).
action("Mission: Impossible - Fallout","Christopher McQuarrie" ,["Tom Cruise", "Henry Cavill", "Ving Rhames", "Simon Pegg", "Rebecca Ferguson"], 2018, 7.7).
 
%Drama
drama("The Shawshank Redemption","Frank Darabont" ,["Tim Robbins", "Morgan Freeman", "Bob Gunton", "William Sadler","Clancy Brown"], 1994, 9.3).
drama("The Pursuit of Happyness","Gabriele Muccino",["Will Smith", "Jaden Smith", "Thandie Newton", "Brian Howe", "James Karen"],2006, 8.0).
drama("12 Years a Slave","Steve McQueen",[ "Chiwetel Ejiofor", "Michael Fassbender", "Lupita Nyongo", "Sarah Paulson", "Benedict Cumberbatch"], 2013, 8.1).
 
%preferences
%data_collected_from_google_forms_quessionaire
user("omar_aldawy",
["Jim Carrey", "Tom Holland", "Will Ferrell", "Matthew McConaughey", "Keanu Reeves", "Will Smith"],
["Christopher Nolan", "George Miller", "Christopher McQuarrie", "Steve McQueen"], 
["Ace Ventura: Pet Detective", "Ghostbusters"], 
["Avengers: Endgame", "Doctor Strange"], 
["Megamind"], 
["Interstellar"], 
["Die Hard", "Mission: Impossible - Fallout"], 
["The Pursuit of Happyness", "12 Years a Slave"]).


user("adam",
["Ralph Fiennes", "Bill Murray", "Tom Holland", "John C. Reilly", "Keanu Reeves", "Iko Uwais", "Tom Cruise"], 
["Ivan Reitman", "John Landis", "Brad Bird", "Rich Moore", "James Cameron", "Frank Darabont"], 
["The Grand Budapest Hotel", "Crazy Rich Asians", "The Breakfast Club"], 
["Spider-Man: No Way Home", "Avengers: Endgame", "Doctor Strange"], 
["The Incredibles", "Megamind", "Wreck-It Ralph"], 
["Interstellar", "Inception", "The Terminator", "The Matrix"], 
["Die Hard", "The Dark Knight"], 
["12 Years a Slave"]).

user("philopatir_mina",
["Jim Carrey", "Leonardo DiCaprio", "Tom Cruise", "Will Smith"], 
["Ivan Reitman", "George Miller", "Frank Darabont", "Gabriele Muccino"], 
["Caddyshack", "Ferris Bueller's Day Off"], 
["Spider-Man: No Way Home", "Doctor Strange"], 
["Kung Fu Panda", "Big Hero 6"], 
["Blade Runner 2049", "Inception", "The Terminator"], 
["The Raid: Redemption", "The Dark Knight"], 
["12 Years a Slave"]).

user("maria_maher",
["Constance Wu", "Emilio Estevez", "Tom Holland", "Craig T. Nelson", "Ryan Potter", "John C. Reilly", "Leonardo DiCaprio", "Tom Hardy"],
["Tom Shadyac", "Wes Anderson", "Ivan Reitman", "John Hughes", "Mark Osborne", "Gabriele Muccino"], 
["Ghostbusters", "Ferris Bueller's Day Off", "Coming to America"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Avengers: Endgame", "Guardians of the Galaxy"], 
["Big Hero 6"], ["Inception", "Dune", "The Terminator", "The Matrix"], ["Mad Max: Fury Road", "The Dark Knight"], 
["The Shawshank Redemption", "The Pursuit of Happyness"]).

user("abdullah_mohamed_ali_zein",
["Jim Carrey", "Ralph Fiennes", "Bill Murray", "Tom Holland", "Benedict Cumberbatch", "Ryan Potter", "Ryan Gosling", "Tom Cruise"], 
["Tom Shadyac", "Harold Ramis", "John Hughes", "Jon Watts", "Christopher Nolan", "George Miller"], 
["Ace Ventura: Pet Detective", "Crazy Rich Asians", "Ghostbusters", "The Breakfast Club"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Guardians of the Galaxy"], 
["The Incredibles", "Megamind", "Big Hero 6"], ["Inception", "The Terminator", "Avatar"], 
["Mad Max: Fury Road", "Die Hard", "The Dark Knight"], 
["The Pursuit of Happyness", "12 Years a Slave"]).

user("bahaa_khaled",
["Constance Wu", "Matthew Broderick", "Emilio Estevez", "Tom Holland", "Robert Downey Jr.", "Chris Pratt", "Ryan Gosling", "Leonardo DiCaprio", "Keanu Reeves", "Bruce Willis", "Iko Uwais"], 
["Ivan Reitman", "Jon Watts", "Brad Bird", "Tom McGrath", "Rich Moore", "Frank Darabont"], 
["Ace Ventura: Pet Detective", "The Grand Budapest Hotel", "Crazy Rich Asians", "Ferris Bueller's Day Off"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Doctor Strange"], 
["Kung Fu Panda", "Megamind", "Big Hero 6"], 
["Inception", "Dune", "Avatar"], 
["The Raid: Redemption", "Mission: Impossible - Fallout"],
["The Shawshank Redemption", "12 Years a Slave"]).

user("youssef_mahmoud",
["Ralph Fiennes", "Bill Murray", "Timothée Chalamet", "Sam Worthington", "Keanu Reeves", "Christian Bale"], 
["Ivan Reitman", "Jon Watts", "Scott Derrickson", "Mark Osborne", "Tom McGrath", "John McTiernan"], 
["Ace Ventura: Pet Detective", "The Grand Budapest Hotel", "Caddyshack"], 
["Spider-Man: No Way Home", "Avengers: Endgame"], 
["Megamind", "Big Hero 6"], 
["Interstellar", "Dune"],
["The Raid: Redemption", "Die Hard", "The Dark Knight"], 
["The Pursuit of Happyness"]).

user("armia",
["Chris Hemsworth", "Tom Holland", "Robert Downey Jr.", "Chris Pratt", "Benedict Cumberbatch", "Ryan Potter", "Christian Bale", "Tom Cruise"], 
["Jon M. Chu", "Ivan Reitman", "John Landis", "James Gunn", "Rich Moore", "Steve McQueen"], 
["Ghostbusters", "The Breakfast Club"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Avengers: Endgame", "Guardians of the Galaxy", "Doctor Strange"], 
["Kung Fu Panda", "The Incredibles", "Big Hero 6"], 
["Interstellar", "Dune", "The Matrix"], 
["John Wick", "Die Hard", "The Dark Knight", "Mission: Impossible - Fallout"], 
["12 Years a Slave"]).

user("pola_hany_fayez",
["Constance Wu", "Bill Murray", "Matthew Broderick", "Matthew McConaughey", "Timothée Chalamet", "Keanu Reeves", "Tom Cruise"],
["Jon M. Chu", "John Landis", "James Gunn", "Brad Bird", "Don Hall", "Christopher McQuarrie"],
["The Grand Budapest Hotel", "Crazy Rich Asians", "Ghostbusters"],
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Avengers: Endgame"],
["Kung Fu Panda", "The Incredibles", "Megamind"],
["Interstellar", "Inception", "The Terminator"],
["Mad Max: Fury Road", "The Dark Knight"],
["The Pursuit of Happyness"]).

user("pierre_jack",
["Chevy Chase", "Tom Holland", "Benedict Cumberbatch", "Jack Black", "Will Ferrell", "Ryan Gosling", "Tom Hardy", "Bruce Willis"],
["Harold Ramis", "John Landis", "Joe Russo", "Mark Osborne", "Don Hall", "James Cameron", "The Wachowskis", "Christopher McQuarrie"],
["Ace Ventura: Pet Detective", "Crazy Rich Asians", "Ghostbusters", "Coming to America", "The Breakfast Club"],
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Avengers: Endgame", "Guardians of the Galaxy", "Doctor Strange"],
["Kung Fu Panda", "The Incredibles", "Big Hero 6"],
["Inception", "Dune", "Avatar"],
["John Wick", "Die Hard", "The Dark Knight"],
["The Shawshank Redemption", "The Pursuit of Happyness"]).

user("andrew_achraf",
["Matthew Broderick", "Emilio Estevez", "Tom Holland", "Timothée Chalamet", "Arnold Schwarzenegger", "Sam Worthington"],
["John Hughes", "Taika Waititi", "Scott Derrickson", "Rich Moore"],
["Crazy Rich Asians", "Caddyshack", "Ghostbusters", "Ferris Bueller's Day Off"],
["Spider-Man: No Way Home", "Avengers: Endgame", "Doctor Strange"],
["Kung Fu Panda", "The Incredibles", "Wreck-It Ralph"],
["Inception", "Dune", "Avatar"],
["The Raid: Redemption", "Die Hard"],
["The Shawshank Redemption", "The Pursuit of Happyness"]).

user("amir_ragae",
["Chevy Chase", "Will Ferrell", "Christian Bale", "Will Smith"],
["Jon M. Chu", "James Cameron", "George Miller", "Gabriele Muccino"], 
["The Grand Budapest Hotel", "Caddyshack", "Ferris Bueller's Day Off"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home"], 
["Kung Fu Panda", "Megamind"], 
["Blade Runner 2049", "Interstellar"], 
["The Raid: Redemption", "Die Hard", "The Dark Knight"], 
["The Shawshank Redemption", "The Pursuit of Happyness", "12 Years a Slave"]).

user("karene_antoine",
["Constance Wu", "Bill Murray", "Tom Holland", "John C. Reilly", "Sam Worthington", "Bruce Willis", "Will Smith"], 
["Jon M. Chu", "John Hughes", "Taika Waititi", "Jon Watts", "Brad Bird", "Tom McGrath", "Rich Moore", "Christopher Nolan"], 
["Ace Ventura: Pet Detective", "Ghostbusters", "Coming to America", "The Breakfast Club"], 
["Thor: Love and Thunder"], ["Megamind", "Big Hero 6", "Wreck-It Ralph"], 
["Blade Runner 2049"], 
["The Dark Knight"], 
["The Shawshank Redemption", "The Pursuit of Happyness", "12 Years a Slave"]).

user("mahmoud_abdelghany",
["Ralph Fiennes", "Bill Murray", "Emilio Estevez", "Tom Holland", "Benedict Cumberbatch", "Will Smith"], 
["Ivan Reitman", "Taika Waititi", "Tom McGrath", "Rich Moore", "Christopher McQuarrie"], 
["Crazy Rich Asians", "Ghostbusters", "Ferris Bueller's Day Off", "Coming to America"], 
["Thor: Love and Thunder", "Avengers: Endgame", "Doctor Strange"], 
["Megamind", "Wreck-It Ralph"], 
["Interstellar", "Inception", "Dune"], 
["Die Hard", "The Dark Knight"], 
["The Pursuit of Happyness", "12 Years a Slave"]).

user("mariam_sameh",
["Chevy Chase", "Matthew Broderick", "Robert Downey Jr."], 
["Mark Osborne", "Brad Bird", "Denis Villeneuve", "George Miller"], 
["Ghostbusters", "Ferris Bueller's Day Off", "Coming to America", "The Breakfast Club"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Avengers: Endgame", "Guardians of the Galaxy", "Doctor Strange"], 
["Kung Fu Panda", "The Incredibles", "Megamind", "Big Hero 6", "Wreck-It Ralph"],
["Blade Runner 2049"], 
["The Dark Knight"], 
["12 Years a Slave"]).

user("mikey_jonson",
["Jim Carrey", "Ralph Fiennes", "Matthew Broderick", "Chris Hemsworth", "Tom Holland", "Jack Black", "Ryan Gosling", "Leonardo DiCaprio", "Sam Worthington", "Bruce Willis"], 
["Jon M. Chu", "Jon Watts", "Joe Russo", "Brad Bird", "Don Hall", "Gareth Evans"], 
["Ace Ventura: Pet Detective", "Crazy Rich Asians", "Ghostbusters", "The Breakfast Club"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home", "Avengers: Endgame", "Guardians of the Galaxy", "Doctor Strange"], 
["Kung Fu Panda", "The Incredibles", "Big Hero 6"], ["Blade Runner 2049", "Interstellar", "The Terminator", "The Matrix"], 
["John Wick", "Mad Max: Fury Road", "The Raid: Redemption", "Mission: Impossible - Fallout"], 
["The Shawshank Redemption", "12 Years a Slave"]).

user("george_tharwat_fawzy", 
["Jim Carrey", "Bill Murray", "Eddie Murphy", "Craig T. Nelson", "Ryan Potter", "Christian Bale", "Will Smith"],
["Ivan Reitman", "Rich Moore", "Christopher Nolan", "Christopher McQuarrie"],
["Ace Ventura: Pet Detective", "Crazy Rich Asians", "Caddyshack"], 
["Spider-Man: No Way Home", "Doctor Strange"], 
["Megamind", "Big Hero 6"],
["Blade Runner 2049", "Inception", "The Terminator"], 
["Mad Max: Fury Road", "The Raid: Redemption", "The Dark Knight"], 
["The Shawshank Redemption", "The Pursuit of Happyness", "12 Years a Slave"]).

user("mostafa_elkaranshawy",
["Chevy Chase", "Emilio Estevez", "Ryan Potter", "Ryan Gosling", "Matthew McConaughey"], 
["Jon M. Chu", "John Hughes", "Taika Waititi", "Joe Russo", "Chad Stahelski"], 
["The Grand Budapest Hotel", "Ghostbusters", "Coming to America"], 
["Thor: Love and Thunder", "Avengers: Endgame", "Doctor Strange"], 
["The Incredibles", "Big Hero 6"], ["Interstellar", "Dune", "Avatar"], 
["John Wick", "The Raid: Redemption"], 
["The Shawshank Redemption", "The Pursuit of Happyness", "12 Years a Slave"]).

user("yomna_yasser",
["Ralph Fiennes", "Chevy Chase", "Emilio Estevez", "Benedict Cumberbatch", "John C. Reilly", "Leonardo DiCaprio", "Sam Worthington", "Keanu Reeves", "Tom Hardy", "Christian Bale", "Chiwetel Ejiofor"], 
["Wes Anderson", "Ivan Reitman", "Scott Derrickson", "Brad Bird", "Don Hall", "Denis Villeneuve", "James Cameron", "George Miller", "Frank Darabont"], 
["Ace Ventura: Pet Detective", "Ghostbusters", "Ferris Bueller's Day Off", "Coming to America", "The Breakfast Club"], 
["Avengers: Endgame"], 
["Kung Fu Panda", "Megamind", "Big Hero 6"], 
["Blade Runner 2049", "Interstellar", "Inception", "The Terminator"], 
["John Wick", "The Raid: Redemption"], 
["The Shawshank Redemption", "The Pursuit of Happyness", "12 Years a Slave"]).

user("ranime_shehata",
["Ralph Fiennes", "Eddie Murphy", "Tom Holland", "Jack Black", "Will Ferrell"], 
["Jon M. Chu", "John Hughes", "Joe Russo", "The Wachowskis", "John McTiernan", "Christopher McQuarrie"], 
["Caddyshack", "Ghostbusters", "Coming to America"], ["Avengers: Endgame", "Guardians of the Galaxy"], 
["The Incredibles", "Big Hero 6"], ["Interstellar", "Avatar"], ["Mad Max: Fury Road", "The Raid: Redemption", "Die Hard"], 
["The Pursuit of Happyness", "12 Years a Slave"]).

user("john",
["Ralph Fiennes", "Eddie Murphy", "Ryan Gosling", "Leonardo DiCaprio", "Tom Hardy"], 
["Harold Ramis", "Joe Russo", "Tom McGrath", "James Cameron", "Gareth Evans"], 
["The Grand Budapest Hotel"], 
["Avengers: Endgame"], 
["Wreck-It Ralph"], 
["Interstellar", "Inception"], 
["John Wick", "The Dark Knight", "Mission: Impossible - Fallout"], 
["The Shawshank Redemption"]).

user("marc",
["Tom Holland", "Jack Black", "Matthew McConaughey"], 
["Mark Osborne", "Brad Bird", "Tom McGrath", "Don Hall"], 
["Coming to America"], 
["Spider-Man: No Way Home"], 
["Kung Fu Panda"], 
["Avatar"], 
["The Dark Knight"], 
["12 Years a Slave"]).

user("kirolos_emad",
["Jim Carrey", "Matthew Broderick", "Eddie Murphy", "Tom Holland", "Robert Downey Jr.", "Chris Pratt", "John C. Reilly", "Timothée Chalamet", "Arnold Schwarzenegger", "Bruce Willis", "Tom Cruise", "Tim Robbins"], 
["John Hughes", "John McTiernan"], 
["Crazy Rich Asians"], 
["Thor: Love and Thunder", "Spider-Man: No Way Home"], 
["Kung Fu Panda", "The Incredibles"], 
["Blade Runner 2049", "Dune", "The Terminator"], 
["John Wick", "The Raid: Redemption", "Die Hard", "Mission: Impossible - Fallout"], 
["12 Years a Slave"]).


%relations%

list_member(X,[X|_]).
list_member(X,[_|TAIL]) :- list_member(X,TAIL). %to_get_actor_from_the_list

genre(X,comedy):- comedy(X,_,_,_,_).
genre(X,superheros):- superheros(X,_,_,_,_).
genre(X,cartoon):- cartoon(X,_,_,_,_).
genre(X,science_fiction):- science_fiction(X,_,_,_,_).
genre(X,action):- action(X,_,_,_,_).
genre(X,drama):- drama(X,_,_,_,_).

age(X,Y) :- 
    (X<12,Y="child");
    (Y="adult").

film(X, Y, Z, W,R):- comedy(X, Y, Z, W,R);
                superheros(X, Y, Z, W,R);
                cartoon(X, Y, Z, W,R);
                science_fiction(X, Y, Z, W,R);
                action(X, Y, Z, W,R);
                drama(X, Y, Z, W,R).

film_year(Y, N):- film(N, _, _, Y,_).

films_of_year(X ,Y, O):- film_year(Y, X), Y < 2000,O="Older". % returns films of given years
films_of_year(X ,Y, O):- film_year(Y, X), Y >= 2000,O="Recent".
films_of_year(X ,Y):- film_year(Y, X).

film_with_actor(X,Z) :- film(X,_,Y,_,_) , list_member(Z,Y).

actor_of_film(X,Y):- film(X,_,Y,_,_).




recommend_to_user_by_genre(User, Genre, Movie) :-
    user(User, _, _, PreferredComedies, PreferredSuperheroMovies, PreferredCartoons, PreferredSciFiMovies, PreferredActionMovies, PreferredDramas),
    genre(Movie, Genre),
    ( 
        (Genre = comedy, member(Movie, PreferredComedies));
        (Genre = superheros, member(Movie, PreferredSuperheroMovies));
        (Genre = cartoon, member(Movie, PreferredCartoons));
        (Genre = science_fiction, member(Movie, PreferredSciFiMovies));
        (Genre = action, member(Movie, PreferredActionMovies));
        (Genre = drama, member(Movie, PreferredDramas))
    ).

recommend_to_user_by_actor(User, UniqueMovies) :-
    user(User, PreferredActors, _, _, _, _, _, _, _),
    setof(Movie, PreferredActor^Actors^(
        film(Movie, _, Actors, _, _),
        member(PreferredActor, PreferredActors),
        member(PreferredActor, Actors)
    ), UniqueMovies).
    
recommend_to_user_by_director(User, UniqueMovies) :-
    user(User, _, PreferredDirectors, _, _, _, _, _, _),
    setof(Movie, Director^(
        film(Movie, Director, _, _, _),
        member(Director, PreferredDirectors)
    ), UniqueMovies).


director_of_film(X,Y):- film(X,Y,_,_,_).

year_of_film(N, Y):- film(N, _, _, Y,_). % year of given film

rating_of_film(Film,Rating) :-film(Film, _,_,_,Rating).

rating_greater_than(Film, MinRating) :-
    rating_of_film(Film, Rating),
    Rating >= MinRating.
year_greater_than(Film, MinYear) :-
    year_of_film(Film, Year),
    Year >= MinYear.

recommend("male", "happy", "adult", Film) :- action(Film, _, _, _, _); comedy(Film, _, _, _, _).
recommend("female", "happy", "adult", Film) :- drama(Film, _, _, _, _); comedy(Film, _, _, _, _).
recommend("male", "sad", "adult", Film) :- drama(Film, _, _, _, _); science_fiction(Film, _, _, _, _).
recommend("female", "sad", "adult", Film) :- drama(Film, _, _, _, _); superheros(Film, _, _, _, _).
recommend("male", "neutral", "adult", Film) :- superheros(Film, _, _, _, _); science_fiction(Film, _, _, _, _).
recommend("female", "neutral", "adult", Film) :- superheros(Film, _, _, _, _); science_fiction(Film, _, _, _, _).
 
recommend("male", "happy", "child", Film) :- cartoon(Film, _, _, _, _); comedy(Film, _, _, _, _).
recommend("female", "happy", "child", Film) :- cartoon(Film, _, _, _, _); comedy(Film, _, _, _, _).
recommend("male", "sad", "child", Film) :- cartoon(Film, _, _, _, _); superheros(Film, _, _, _, _).
recommend("female", "sad", "child", Film) :- cartoon(Film, _, _, _, _); superheros(Film, _, _, _, _).
recommend("male", "neutral", "child", Film) :- cartoon(Film, _, _, _, _); superheros(Film, _, _, _, _).
recommend("female", "neutral", "child", Film) :- cartoon(Film, _, _, _, _); superheros(Film, _, _, _, _).

filtered_film(Film, Genre, Year, Rating) :-
    film(Film,_,_,_,_),genre(Film,Genre),year_greater_than(Film,Year),
    rating_greater_than(Film,Rating).

% Recommendation rule for "happy" adult males
complex_recommend("male", "happy", "adult", Film) :-
    (action(Film, _, _, _, Rating); 
    comedy(Film, _, _, _, Rating); 
    drama(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "happy" adult females
complex_recommend("female", "happy", "adult", Film) :-
    (comedy(Film, _, _, _, Rating); 
    drama(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "sad" adult males
complex_recommend("male", "sad", "adult", Film) :-
    drama(Film, _, _, _, Rating),
    Rating > 6.
 
% Recommendation rule for "sad" adult females
complex_recommend("female", "sad", "adult", Film) :-
    drama(Film, _, _, _, Rating),
    Rating > 6.
 
% Recommendation rule for "neutral" adult males
complex_recommend("male", "neutral", "adult", Film) :-
    (superheros(Film, _, _, _, Rating); 
    science_fiction(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "neutral" adult females
complex_recommend("female", "neutral", "adult", Film) :-
    (superheros(Film, _, _, _, Rating); 
    science_fiction(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "happy" male children
complex_recommend("male", "happy", "child", Film) :-
    (cartoon(Film, _, _, _, Rating); 
    superheros(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "happy" female children
complex_recommend("female", "happy", "child", Film) :-
    (cartoon(Film, _, _, _, Rating); 
    superheros(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "sad" male children
complex_recommend("male", "sad", "child", Film) :-
    (cartoon(Film, _, _, _, Rating); 
    superheros(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "sad" female children
complex_recommend("female", "sad", "child", Film) :-
    (cartoon(Film, _, _, _, Rating); 
    superheros(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "neutral" male children
complex_recommend("male", "neutral", "child", Film) :-
    (cartoon(Film, _, _, _, Rating); 
    superheros(Film, _, _, _, Rating)),
    Rating > 6.
 
% Recommendation rule for "neutral" female children
complex_recommend("female", "neutral", "child", Film) :-
    (cartoon(Film, _, _, _, Rating); 
    superheros(Film, _, _, _, Rating)),
    Rating > 6.
%% user input 
    

start(Film) :-	
    write('Expert System - Film Recommender'), nl,
    write('Please answer the questions below'), nl,
	write(" Are you already a user?"),nl
    ,write('1- user'), nl,
    write('2- not-user'), nl
    ,read(User),(     
    (User=:=1,start_guest(Film)) ; (   User=\=1,
    write('What is your name? '), read(Name), nl,
    write('Hello '), write(Name), nl,

    write('Could you please share your age?'),  nl, read(Age), age(Age, AgeCategory),
    write('What is your gender?'), nl,
    write('1- Male'), nl,
    write('2- Female'), nl,
    read(Gender), nl, 
    ((Gender =:= 1, G = "male");
     (Gender =:= 2, G = "female")),

    write('How about your mood? '), nl,
    write('1- Happy'), nl,
    write('2- Sad'), nl,
    write('3- Neutral'), nl,
    read(Mood), nl, 
    ((Mood =:= 1, M = "happy");
     (Mood =:= 2, M = "sad");
     (Mood =:= 3, M = "neutral")),

    write('Which genre of films do you enjoy?'), nl,
    write('1- comedy'), nl,
    write('2- superheros'), nl,
    write('3- cartoon'), nl,
    write('4- science_fiction'), nl,
    write('5- action'), nl,
    write('6- drama'), nl,
    read(GenreNumber), nl,

    % Map GenreNumber to the corresponding genre string
    genre_number_to_string(GenreNumber, GenreString),
    
    % Find a film of the chosen genre
    genre(Film, GenreString),
    
    % Call the complex recommendation logic
    complex_recommend(G, M, AgeCategory, Film))).

% Helper predicate to map genre number to genre string
genre_number_to_string(1, comedy).
genre_number_to_string(2, superheros).
genre_number_to_string(3, cartoon).
genre_number_to_string(4, science_fiction).
genre_number_to_string(5, action).
genre_number_to_string(6, drama).

   
start_filter(Film):-
    		  write('Expert System - Film filtering'), nl,
              write('Please answer the questions below'), nl,
    
              write('What is your name? '), read(Name), nl,
              write('Hello '), write(Name), nl,
    
              write('From any year you prefer to choose your films? '),  nl,read(Year),
    
              write('What\'s the minimum rating you prefer for films?'),nl,
              read(Rating), nl,

              write('Which genre of films do you enjoy?'),nl,
              write('1- comedy'),nl,
              write('2- superheros'),nl,
              write('3- cartoon'),nl,
              write('4- science_fiction'),nl,
              write('5- action'),nl,
              write('6- drama'),nl,
              read(Genre),
    
              write('Enter name of director you love:'),nl,
              read(Director), nl,
    
    		  write('We recommend you watch: '),nl,
    		  filtered_film(Film,Genre,Year,Rating), director_of_film(Film,Director).

start_guest(Movies):-
    write('Please answer the questions below'), nl,
    
    write('What is your name? '), read(Name), nl,
    write('Hello '), write(Name), nl,
    
    write('Please choose your recommendation type:'), nl,
    write('1- By Genre'), nl,
    write('2- By Actor'), nl,
    write('3- By Director'), nl,
    read(Choice), nl,
    handle_choice(Choice, Name,Movies).

handle_choice(1, Name,Movies) :-
    write('Please select a genre:'), nl,
    write('1- Comedy'), nl,
    write('2- Superheros'), nl,
    write('3- Cartoon'), nl,
    write('4- Science Fiction'), nl,
    write('5- Action'), nl,
    write('6- Drama'), nl,
    read(GenreChoice), nl,
    write('We recommend you watch: '),nl,
    genre_choice_to_string(GenreChoice, Genre),
    recommend_to_user_by_genre(Name, Genre, Movies).
    

handle_choice(2, Name,Movies) :-
    write('We recommend you watch: '),nl,
    recommend_to_user_by_actor(Name, Movies),
    nl.

handle_choice(3, Name,Movies) :-
    write('We recommend you watch: '),nl,
    recommend_to_user_by_director(Name, Movies),
     nl.


% Mapping genre choice number to genre string
genre_choice_to_string(1, comedy).
genre_choice_to_string(2, superheros).
genre_choice_to_string(3, cartoon).
genre_choice_to_string(4, science_fiction).
genre_choice_to_string(5, action).
genre_choice_to_string(6, drama).

    
   
